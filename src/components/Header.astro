---
import logotype from "../assets/logotype.svg?url";
---

<style>
  .header-gradient {
    background: transparent;
    transition: background-color 0.3s ease;
  }

  .header-gradient.scrolled {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
  }

  .nav-pill {
    background: rgba(255, 255, 255, 0.12);
    color: white;
    padding: 12px 28px;
    border-radius: 9999px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
  }

  .nav-pill:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }

  .nav-pill-solid {
    background: white;
    color: black;
    padding: 12px 28px;
    border-radius: 9999px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .nav-pill-solid:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  }

  .mobile-menu {
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }

  .mobile-menu.open {
    transform: translateX(0);
  }

  .hamburger {
    display: none;
    flex-direction: column;
    cursor: pointer;
    padding: 4px;
  }

  @media (max-width: 767px) {
    .hamburger {
      display: flex;
    }
  }

  .hamburger span {
    width: 25px;
    height: 3px;
    background: white;
    margin: 3px 0;
    transition: 0.3s;
  }

  .hamburger.open span:nth-child(1) {
    transform: rotate(-45deg) translate(-5px, 6px);
  }

  .hamburger.open span:nth-child(2) {
    opacity: 0;
  }

  .hamburger.open span:nth-child(3) {
    transform: rotate(45deg) translate(-5px, -6px);
  }
</style>

<header class="header-gradient fixed top-0 left-0 right-0 z-50 px-4 py-4">
  <div class="max-w-7xl mx-auto flex items-center justify-between">
    <!-- Logo -->
    <div class="flex items-center">
      <img src={logotype} alt="Stupido Hackettino" class="h-8 w-auto" />
    </div>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center ml-auto">
      <a href="#about" class="nav-pill mr-2"> About </a>
      <a href="#venue" class="nav-pill mr-2"> Venue </a>
      <a href="#agenda" class="nav-pill mr-2"> Agenda </a>
      <a href="#code-of-conduct" class="nav-pill mr-2"> Code of Conduct </a>
      <a href="#sponsors" class="nav-pill mr-2"> Sponsors </a>
      <a href="#staff" class="nav-pill mr-4"> Staff </a>
      <a href="#projects" class="nav-pill-solid">
        <span>Projects</span>
        <div
          class="ml-2 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"
        >
          <svg
            class="w-3 h-3 text-white transform rotate-45"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </div>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="hamburger md:hidden"
      aria-label="Toggle menu"
    >
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <div
    id="mobile-menu"
    class="mobile-menu md:hidden fixed inset-y-0 left-0 w-80 bg-gray-900 bg-opacity-95 backdrop-blur-sm z-40"
  >
    <div class="flex flex-col h-full">
      <div
        class="flex items-center justify-between p-4 border-b border-gray-700"
      >
        <img src={logotype} alt="Stupido Hackettino" class="h-8 w-auto" />
        <button
          id="mobile-menu-close"
          class="text-white text-2xl"
          aria-label="Close menu"
        >
          Ã—
        </button>
      </div>

      <nav class="flex-1 px-4 py-6">
        <div class="space-y-6">
          <a
            href="#about"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            About
          </a>
          <a
            href="#venue"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            Venue
          </a>
          <a
            href="#agenda"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            Agenda
          </a>
          <a
            href="#code-of-conduct"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            Code of Conduct
          </a>
          <a
            href="#sponsors"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            Sponsors
          </a>
          <a
            href="#staff"
            class="mobile-nav-link block text-white text-lg font-medium hover:text-gray-300"
          >
            Staff
          </a>
        </div>

        <div class="mt-8">
          <a
            href="#projects"
            class="sponsor-button inline-flex items-center w-full justify-center px-6 py-3 rounded-full text-white font-semibold shadow-lg"
          >
            <span>Projects</span>
            <svg
              class="ml-2 w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  // Mobile menu functionality
  document.addEventListener("DOMContentLoaded", () => {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileMenuClose = document.getElementById("mobile-menu-close");
    const mobileNavLinks = document.querySelectorAll(".mobile-nav-link");

    function toggleMobileMenu() {
      mobileMenu?.classList.toggle("open");
      mobileMenuButton?.classList.toggle("open");
    }

    function closeMobileMenu() {
      mobileMenu?.classList.remove("open");
      mobileMenuButton?.classList.remove("open");
    }

    mobileMenuButton?.addEventListener("click", toggleMobileMenu);
    mobileMenuClose?.addEventListener("click", closeMobileMenu);

    // Close menu when clicking on nav links
    mobileNavLinks.forEach((link) => {
      link.addEventListener("click", closeMobileMenu);
    });

    // Close menu when clicking outside
    document.addEventListener("click", (e) => {
      const isClickInsideMenu = mobileMenu?.contains(e.target as Node);
      const isClickOnMenuButton = mobileMenuButton?.contains(e.target as Node);

      if (
        !isClickInsideMenu &&
        !isClickOnMenuButton &&
        mobileMenu?.classList.contains("open")
      ) {
        closeMobileMenu();
      }
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(
          this.getAttribute("href") as string
        );
        if (target) {
          target.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });

    // Header background on scroll
    const header = document.querySelector(".header-gradient");

    function handleScroll() {
      if (window.scrollY > 50) {
        header?.classList.add("scrolled");
      } else {
        header?.classList.remove("scrolled");
      }
    }

    window.addEventListener("scroll", handleScroll);
    // Call once to set initial state
    handleScroll();
  });
</script>
